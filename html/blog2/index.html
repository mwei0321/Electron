<!doctype html>
<html>
    <head>
        <title>python学习,马伟博客,python博客,php博客 ,Python博客,马伟个人博客,PhPyRb博客</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <meta name="keywords" content="PHP,Pythoy,Ruby,Js,Jquery,HTML5,Css,Ajax,python学习,个人主页,博客,网站建设,PHP建站" />
        <meta name="description" content="pythob学习,深圳PHP博客,马伟个人博客,python博客" />
        <link href="./css/base.css" rel="stylesheet" type="text/css" />
        <link type="text/css" rel="stylesheet" href="./css/prism.css"/>
    </head>
    <body>
        <div class="header">
        	<div class="header_nav">
        		<div class="logo inline"><a href="{:U('Article/index')}">PhPython Blog</a></div>
        		<div class="inline">
	        	<dl class="mean">
	        		<dd>
	        			<a href="**" title="">学习,马伟</a>
	        			<dl class="">
	        				<dd><a href="aa">学习,马伟</a>
	        				<dd><a href="aa">学习,马伟</a>
	        				<dd><a href="aa">学习,马伟</a>
	        			</dl>
	        		</dd>
	        		<dd>
	        			<a href="**" title="">学习,马伟</a>
	        			<dl>
	        				<dd><a href="aa">学习,马伟</a>
	        				<dd><a href="aa">学习,马伟</a>
	        				<dd><a href="aa">学习,马伟</a>
	        				<dd><a href="aa">学习,马伟</a>
	        			</dl>
	        		</dd>
	        	</dl>
	        	</div>
	        	<div class="clr"></div>
        	</div>
        </div>
<!-- end header -->
<!-- start content -->
        <div class="content">
            <div class="left">
				
		<div class="article first">
         		<h2 class="h123"><a href="http://p.com/Article-content-artid-74.html" title="windows下安装redis" target="_blank">windows下安装redis</a></h2>
                <p class="tag">标 签：
				<a href="http://p.com/Article-catags-tag-19.html" title="1"><span>php</span></a>				</p>
				<div class="clr"></div>
				<div class="date" style="border:none;box-shadow:none;z-index:-100;">
                	<!--
                	<p class="image"><a href="/index.php?m=Index&a=index"><img alt="PhPyRb博客!马伟博客!" src="./Public/Image/logo.jpg" /></a></p>
                    <p class="time"><a href="/index.php?m=Index&a=index">Ma Wei</a></p>
					-->
                </div>
                <div class="clr"></div>
                <div class="cont" id="maxart"><p>
	&nbsp; &nbsp; 在linux下安装redis没有什么好说的，主要是在windows下安装,具体如下：
</p>
<p>
	&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; 1.首先是下载 windows 版的 redis 了，打开官网下载页：<a href="http://redis.io/download">http://redis.io/download</a>&nbsp;，找啊找，发现在SB了，上面说不支持 windows 。不过先不要急，上面有个 learn more ，点击进去，然后是一个github的网站代码，代码列表上面有菜单栏，第三个是 release 这个菜单，点击进去，然后你就兴奋，看到了 window 版的 redis 下载了，一般下 .msi 的。
</p>
<p>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 2.下载完成了，肯定是安装了，设置一下安装目录，一般安装在根目录下。注意要把加入环境变量钩上。
</p>
<p>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 3.最后就是运行了，启动命令：
</p>
<pre class="brush:bash">redis-server.exe redis.windows.conf</pre>
<p>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 4.运行没有错误就OK了。
</p></div>
                <div class="info">
                	<p>
                		<span><a href="http://p.com/Article-catags-cate-24.html" target="_blank">MongoDB</a></span> / 
						<span><a href="http://p.com/Article-comment-artid-74.html" target="_blank">评 论&nbsp;(0)</a></span> / 
						<span>热度&nbsp;(0℃)</span> / 
						<span>2016-07-13</span> / 
						<span><a href="http://p.com/Article-comment-artid-74.html" target="_blank">阅读全文&nbsp;</a></span> /
						<span>MaWei-PhPyRb</span> 
					</p>
			      </div>
                </div>
                <div>
                    <div class="clr">
                    </div>
                </div><div class="article first">
         		<h2 class="h123"><a href="http://p.com/Article-content-artid-73.html" title="Unable to find vcvarsall.bat" target="_blank">Unable to find vcvarsall.bat-Python</a></h2>
                <p class="tag">标 签：
				<a href="http://p.com/Article-catags-tag-21.html" title="2"><span>python</span></a>				</p>
				<div class="clr"></div>
				<div class="date" style="border:none;box-shadow:none;z-index:-100;">
                	<!--
                	<p class="image"><a href="/index.php?m=Index&a=index"><img alt="PhPyRb博客!马伟博客!" src="./Public/Image/logo.jpg" /></a></p>
                    <p class="time"><a href="/index.php?m=Index&a=index">Ma Wei</a></p>
					-->
                </div>
                <div class="clr"></div>
                <div class="cont" id="maxart"><blockquote>
	<p>
		我想很多人在安装Python扩展的一些东西的时候，我就是安装 scarpy，安装的时候报 ‘lxml’错误，提示找不到 ‘Unable to find vcvarsall.bat’，肯定在网上搜索过，
	</p>
</blockquote>
<p>
	但都说要安装各种版本的 vc++ ，我也是这么装，各个版本的都装了，但还是不行。
</p>
<blockquote>
	<p>
		这个问题我搞了快一个星期，最后一个大牛网友交了我一个很好的方法，就是直接安装编译好的 lxml,然后就好了。非常感谢这位大牛。
	</p>
	<p>
		具体方法如下：
	</p>
	<p>
		&nbsp;&nbsp;&nbsp; 1.确定你的Python版本。如：Python3.5-64bit
	</p>
	<p>
		&nbsp;&nbsp;&nbsp; 2.然后去下载对应的编译好的 lxml 包，下载地址：<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml">http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml</a> 
	</p>
	<p>
		&nbsp;&nbsp;&nbsp; 3.最好是下载一个盘的根目录下，这样方便安装，比如我下载在D盘，
	</p>
	<p>
		&nbsp;&nbsp;&nbsp; 4.运行:pip3.5 install lxml-3.6.0-cp35-cp35m-win_amd64.whl ,确定命令窗口位置在D盘
	</p>
	<p>
		&nbsp;&nbsp;&nbsp; 5.然后你再装，就OK，比如我是安装 scarpy 的时候错误的。现在就好了。
	</p>
</blockquote></div>
                <div class="info">
                	<p>
                		<span><a href="http://p.com/Article-catags-cate-4.html" target="_blank">Python</a></span> / 
						<span><a href="http://p.com/Article-comment-artid-73.html" target="_blank">评 论&nbsp;(0)</a></span> / 
						<span>热度&nbsp;(0℃)</span> / 
						<span>2016-07-13</span> / 
						<span><a href="http://p.com/Article-comment-artid-73.html" target="_blank">阅读全文&nbsp;</a></span> /
						<span>MaWei-PhPyRb</span> 
					</p>
			      </div>
                </div>
                <div>
                    <div class="clr">
                    </div>
                </div><div class="article first">
         		<h2 class="h123"><a href="http://p.com/Article-content-artid-1.html" title="debian初始安装,debian安装设置,debian安装vim,debian安装代码提示,debian安装PHP环境,debian安装lnmp" target="_blank">debian 初始安装</a></h2>
                <p class="tag">标 签：
				<a href="http://p.com/Article-catags-tag-17.html" title="1"><span>debian</span></a><a href="http://p.com/Article-catags-tag-14.html" title="1"><span>Vim</span></a><a href="http://p.com/Article-catags-tag-13.html" title="1"><span>Linux</span></a>				</p>
				<div class="clr"></div>
				<div class="date" style="border:none;box-shadow:none;z-index:-100;">
                	<!--
                	<p class="image"><a href="/index.php?m=Index&a=index"><img alt="PhPyRb博客!马伟博客!" src="./Public/Image/logo.jpg" /></a></p>
                    <p class="time"><a href="/index.php?m=Index&a=index">Ma Wei</a></p>
					-->
                </div>
                <div class="clr"></div>
                <div class="cont" id="maxart"><p>
	1.下载debian&nbsp;网址:<a href="http://www.debian.org/distrib/">http://www.debian.org/distrib/</a>&nbsp;
</p>
<p>
	2.选择CD就可以了 32位 和 64 位随便选
</p>
<p>
	3.安装debian 最好断网安装 网速快可以连网安装
</p>
<p>
	3.安装好后修改源并更新
</p>
<p>
	4.源
</p>
<p>
	在更新源的时候，要注意查看自己的系统版本源名：
</p>
<pre class="brush:bash">lsb_release -a</pre>
codename就是源名
<p>
	&nbsp;&nbsp;&nbsp;&nbsp;操作如下：
</p>
<pre class="brush:bash">cd /etc/apt/
</pre>
源名：jessie，适合Debian8.x版本
<pre class="brush:bash">wget -c http://mirrors.163.com/.help/sources.list.jessie
</pre>
源名：wheezy，适合Debian7.x版本
<pre class="brush:bash">wget -c http://mirrors.163.com/.help/sources.list.wheezy
</pre>
源名：squeeze，适合Debian6.x版本
<pre class="brush:bash">wget -c http://mirrors.163.com/.help/sources.list.squeeze
</pre>
<pre class="brush:bash">cp sources.list sources.list.bak
mv sources.list.squeeze sources.list
</pre>
<p>
	然后开始更新源：
</p>
<pre class="brush:bash">apt-get update
apt-get upgrade</pre>
<p>
	<br>
</p>
<p>
	5.安装`vim`, `ctags`, `postgresql`, `lnmp`, `setuptools`, `sqlite3`
</p>
<pre class="brush:bash">apt-get install vim ctags sqlite3 libsqlite3-dev python-dev git  ruby rubygems postgresql </pre>
<pre class="brush:bash"># 要在安装 lnmp 之前安装 libmysqld-dev，否则安装 libmysqld-dev 就会破坏 lnmp 所安装的 mysql
apt-get install libmysqld-dev
</pre>
<pre class="brush:bash">mkdir down
cd down
wget http://peak.telecommunity.com/dist/ez_setup.py
python ez_setup.py
easy_install mysql-python
</pre>
<pre class="brush:bash">wget -c http://soft.vpser.net/lnmp/lnmp1.0-full.tar.gz &amp;&amp; tar zxvf lnmp1.0-full.tar.gz 
cd lnmp1.0-full 
./debian.sh
</pre>
<pre class="brush:bash"># 修改 debian.sh 让安装后的 php-fpm 支持 postgresql，添加 `--with-pgsql=/var/lib/postgresql/8.4/main` 到374行的行尾
vi debian.sh
</pre>
<pre class="brush:bash"># 替换 vhost.sh 中所有的 wwwroot 为 www。让新建的站点默认的根目录在 /home/www 下
vi vhost.sh
</pre>
<pre class="brush:bash">./debian.sh

./eaccelerator.sh
./ionCube.sh
./imageMagick.sh
</pre>
<pre class="brush:bash"># 解决 memcached 找不到目录的问题
mkdir -p /var/lock/subsys
./memcached.sh</pre>
<p>
	<br>
</p>
安装vim,命命别名等、请阅读 <a href="http://www.phpyrb.com/Article-index-artid-10.html">Linux配置`.bashrc`, `vim`， Linux配置命令缩写</a></div>
                <div class="info">
                	<p>
                		<span><a href="http://p.com/Article-catags-cate-9.html" target="_blank">Linux</a></span> / 
						<span><a href="http://p.com/Article-comment-artid-1.html" target="_blank">评 论&nbsp;(0)</a></span> / 
						<span>热度&nbsp;(834℃)</span> / 
						<span>2016-05-23</span> / 
						<span><a href="http://p.com/Article-comment-artid-1.html" target="_blank">阅读全文&nbsp;</a></span> /
						<span>PhPyRb-MaWei</span> 
					</p>
			      </div>
                </div>
                <div>
                    <div class="clr">
                    </div>
                </div><div class="article first">
         		<h2 class="h123"><a href="http://p.com/Article-content-artid-72.html" title="lnmp php rar,nginx php rar" target="_blank">nginx php rar</a></h2>
                <p class="tag">标 签：
				<a href="http://p.com/Article-catags-tag-19.html" title="1"><span>php</span></a><a href="http://p.com/Article-catags-tag-17.html" title="1"><span>debian</span></a><a href="http://p.com/Article-catags-tag-13.html" title="1"><span>Linux</span></a>				</p>
				<div class="clr"></div>
				<div class="date" style="border:none;box-shadow:none;z-index:-100;">
                	<!--
                	<p class="image"><a href="/index.php?m=Index&a=index"><img alt="PhPyRb博客!马伟博客!" src="./Public/Image/logo.jpg" /></a></p>
                    <p class="time"><a href="/index.php?m=Index&a=index">Ma Wei</a></p>
					-->
                </div>
                <div class="clr"></div>
                <div class="cont" id="maxart"><p>
	&nbsp;&nbsp;&nbsp; 最近项目需要用到php解压rar,不知道怎么搞,这几天一直在折腾php解压rar,搞的我都没有脾气了,在网上找各种资料,发现真的没有什么这方面的资料,http://www.phpyrb.com/Admin-Article-edit.html
</p>
<p>
	可能这个需求比较少吧,搞了好久,今天终于搞定了,下面说一下方法:
</p>
<p>
	&nbsp;&nbsp;&nbsp; 1.下载php扩展rar包,网址为 http://pecl.php.net/package/rar;
</p>
<p>
	&nbsp;&nbsp;&nbsp; 2.首先还是来说一下window版本的,这个容易,直接下载一个dll动态链接库包都放在php扩展包目录里面的,然后改一下配置文件重启就可以了.具体如下:
</p>
<p>
	网址:http://pecl.php.net/package/rar/3.0.2/windows,已经在上面的网址中选择最新版本的rar扩展包,后面有个window DLL的图标点击进去下载,下载后把
</p>
<p>
	里面的php_rar.dll这个文件放在你的php安装目录/php/ext/文件夹里面,然后再修改 php.ini ,在里面加上:
</p>
<pre class="brush:bash">extension=php_rar.dll</pre>
然后重启你的服务器就可以,这个很简单,主要是linux服务器难搞,下面来说说liunx的安装方法:
<p>
	<br>
</p>
<p>
	&nbsp;&nbsp;&nbsp; 3.我用的是debian的系统,装的是 nginx 也就是lnmp包,
</p>
<p>
	&nbsp;&nbsp;&nbsp; 4.第一步还是先下载并解压,命令如下:
</p>
<pre class="brush:bash">wget http://pecl.php.net/get/rar-3.0.2.tgz
tar -xvf rar-3.0.2.tgz
cd rar-3.0.2
</pre>
&nbsp;&nbsp;&nbsp;&nbsp; 5.然后是编译,首页你要安装一个编译插件:
<pre class="brush:bash">#Debianhttp://www.phpyrb.com/Admin-Article-edit.html
apt-get install libc-client-dev
#CentOS
yum install libc-client-devel</pre>
<p>
	&nbsp;&nbsp;&nbsp; 6.下面两步很关键,我就是这步没有搞好,所以一直不行,在官方文档里面,安装是直接运行 phpize,这是他包里面默认就有的,我照着他里面做就是不行,这个应该用你安装的php里面的phpize再编译,如果没有你修改
</p>
<p>
	nginx安装路径,那么命令应该如下,反正就是用你安装好的php里面的phpize来编辑,不要用包里面自带这的.命令如下:
</p>
<pre class="brush:bash">/usr/local/php/bin/phpize</pre>
<p>
	<br>
</p>
<p>
	可能这步会出现一些警告,如下的一样
</p>
<pre class="brush:bash">Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
configure.in:3: warning: prefer named diversions
configure.in:3: warning: prefer named diversions</pre>
这个没有关系 ,不要影响后面的.
<p>
	<br>
</p>
<p>
	&nbsp;&nbsp;&nbsp;&nbsp; 7.这步是最关键的,就是告诉编译环境你的php路径,这步非常重要,我就是被这步给搞死的,命令如下,如果你没有修改默认路径的话:
</p>
<pre class="brush:bash">./configure --with-php-config=/usr/local/php/bin/php-config</pre>
&nbsp;&nbsp;&nbsp;&nbsp; 8.最后一步就是添加配置,然后重启,修改php.ini配置:
<pre class="brush:bash">vi /usr/local/php/etc/php.ini</pre>
然后在里面的添加:
<pre class="brush:bash">extension=rar.so</pre>
然后保存,退出,重启nginx:
<pre class="brush:bash">~/lnmp restart</pre>
如果没有报错,那就OK了.如果有问题,重新来一遍.嘿嘿^<br>
<p>
	<br>
</p></div>
                <div class="info">
                	<p>
                		<span><a href="http://p.com/Article-catags-cate-4.html" target="_blank">Python</a></span> / 
						<span><a href="http://p.com/Article-comment-artid-72.html" target="_blank">评 论&nbsp;(0)</a></span> / 
						<span>热度&nbsp;(185℃)</span> / 
						<span>2015-01-06</span> / 
						<span><a href="http://p.com/Article-comment-artid-72.html" target="_blank">阅读全文&nbsp;</a></span> /
						<span>MaWei-PhPyRb</span> 
					</p>
			      </div>
                </div>
                <div>
                    <div class="clr">
                    </div>
                </div><div class="article first">
         		<h2 class="h123"><a href="http://p.com/Article-content-artid-71.html" title="crontab命令详解" target="_blank">crontab</a></h2>
                <p class="tag">标 签：
				<a href="http://p.com/Article-catags-tag-17.html" title="1"><span>debian</span></a><a href="http://p.com/Article-catags-tag-13.html" title="1"><span>Linux</span></a>				</p>
				<div class="clr"></div>
				<div class="date" style="border:none;box-shadow:none;z-index:-100;">
                	<!--
                	<p class="image"><a href="/index.php?m=Index&a=index"><img alt="PhPyRb博客!马伟博客!" src="./Public/Image/logo.jpg" /></a></p>
                    <p class="time"><a href="/index.php?m=Index&a=index">Ma Wei</a></p>
					-->
                </div>
                <div class="clr"></div>
                <div class="cont" id="maxart"><p>
	&nbsp;&nbsp;&nbsp; 最近项目要用到计划任务，学习了一下linux计划任务命令：crontab，这个命令是linux定时任务服务命令，下面我总结了一下，共大家一起共同学习一下：
</p>
<p>
	&nbsp;&nbsp;&nbsp; 1.安装crontab命令服务：
</p>
<pre class="brush:bash">#debian安装
apt-get install cron
#centos安装
yum install crontabs</pre>
&nbsp;&nbsp;&nbsp;&nbsp; 2.开启crontab服务：
<pre class="brush:bash">/etc/init.d/cron restart｜reload|start|stop #重启｜重载配置｜开启｜停止</pre>
&nbsp;&nbsp;&nbsp;&nbsp; 3.查看crontab服务状态
<pre class="brush:bash">service cron status</pre>
&nbsp;&nbsp;&nbsp;&nbsp; 4.crontab命令格式：
<p>
	<br>
</p>
<p>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; crontab user command #crontab 执行程序的用户名 执行的命令，
</p>
<p>
	&nbsp;&nbsp;&nbsp; 5.crontab命令完整格式：
</p>
<pre class="brush:bash">* * * * * user command  #前面五个星号为时期，依次表示，分 时 天 周 月,user为执行的用户名,command为执行命令</pre>
<p>
	&nbsp;&nbsp;&nbsp;&nbsp; 6.Crontab执行时间说明：
</p>
<p>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * 星号表示全部，为任意时间
</p>
<p>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ,&nbsp; 逗号表示范围，例：1,2,3&nbsp; 如果写的周上，表示 星期一到星期三
</p>
<p>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp; 中横杠表示一个连续的整数范围 例：1-3 如果写的周上，表示 星期一到星期三
</p>
<p>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&nbsp; 正斜线表示时间间隔频率 例：0-23/4写在时上，表示一天24小时每四小时执行一次
</p>
<p>
	&nbsp;&nbsp;&nbsp; 7.crontab编辑：
</p>
<pre class="brush:bash">crontab -e</pre>
&nbsp;&nbsp;&nbsp;&nbsp; 用上面的命令，会打开crontab计划任务的编辑文件，在里面输入你执行的计划任务，详细请看第六步，例：
<pre class="brush:bash">* */2 * * * www curl http://www.phpyrb.com #意思为每二分钟访问一个这个网站</pre>
<p>
	<br>
</p>
<p>
	&nbsp;&nbsp;&nbsp; 以上我个人理解，整理。
</p></div>
                <div class="info">
                	<p>
                		<span><a href="http://p.com/Article-catags-cate-4.html" target="_blank">Python</a></span> / 
						<span><a href="http://p.com/Article-comment-artid-71.html" target="_blank">评 论&nbsp;(0)</a></span> / 
						<span>热度&nbsp;(165℃)</span> / 
						<span>2014-12-24</span> / 
						<span><a href="http://p.com/Article-comment-artid-71.html" target="_blank">阅读全文&nbsp;</a></span> /
						<span>MaWei-PhPyRb</span> 
					</p>
			      </div>
                </div>
                <div>
                    <div class="clr">
                    </div>
                </div><div class="article first">
         		<h2 class="h123"><a href="http://p.com/Article-content-artid-70.html" title="crontab修改默认编辑器" target="_blank">crontab修改编辑器</a></h2>
                <p class="tag">标 签：
				<a href="http://p.com/Article-catags-tag-13.html" title="1"><span>Linux</span></a>				</p>
				<div class="clr"></div>
				<div class="date" style="border:none;box-shadow:none;z-index:-100;">
                	<!--
                	<p class="image"><a href="/index.php?m=Index&a=index"><img alt="PhPyRb博客!马伟博客!" src="./Public/Image/logo.jpg" /></a></p>
                    <p class="time"><a href="/index.php?m=Index&a=index">Ma Wei</a></p>
					-->
                </div>
                <div class="clr"></div>
                <div class="cont" id="maxart"><p>
	<br>
</p>
<p>
	&nbsp;&nbsp;&nbsp; 今天做项目的时候，需要用到计划任务，执行PHP任务。用crontab -e，打开，一下子傻眼了，一看用的nano编辑器，
</p>
<p>
	这个编辑我只听过，不会用啊，跟VIM命令完全不一样，我想要换编辑器，在网上查了一下，我自己又总结了一下，方法如下，
</p>
<p>
	下面的是把默认的nano修改为vim;
</p>
<p>
	&nbsp;&nbsp;&nbsp; 方法1：（此方法只是临时生效）
</p>
<pre class="brush:bash">export EDITOR=/usr/bin/vim;</pre>
<p>
	&nbsp;&nbsp;&nbsp; 方法2：（此方法相对上面要好一点，但要重启服务器）
</p><pre class="brush:bash">echo export EDITOR=/usr/bin/vim &gt;&gt; ~/.bashrc</pre>
&nbsp;&nbsp; 方法3： （此方法也要重启）
<pre class="brush:jscript">#查看当前系统有那些编辑器可用 
update-alternatives --list editor
#修改系统默认编辑器，输入如下的命令后，然后会提示你选择那个，直接输入数字
update-alternatives --config editor
</pre>
<p></p>
<p>
	&nbsp;&nbsp;&nbsp; 方法4：（这种方法更直接，而且不用重启）
</p><pre class="brush:bash">apt-get remove nano</pre>
<p></p>
<p>
	&nbsp;&nbsp;&nbsp; 直接卸载nano编辑器，我个人推荐这种，不用这个编辑器，直接卸载更好
</p></div>
                <div class="info">
                	<p>
                		<span><a href="http://p.com/Article-catags-cate-9.html" target="_blank">Linux</a></span> / 
						<span><a href="http://p.com/Article-comment-artid-70.html" target="_blank">评 论&nbsp;(0)</a></span> / 
						<span>热度&nbsp;(138℃)</span> / 
						<span>2014-12-22</span> / 
						<span><a href="http://p.com/Article-comment-artid-70.html" target="_blank">阅读全文&nbsp;</a></span> /
						<span>MaWei-PhPyRb</span> 
					</p>
			      </div>
                </div>
                <div>
                    <div class="clr">
                    </div>
                </div><div class="article first">
         		<h2 class="h123"><a href="http://p.com/Article-content-artid-69.html" title="mysql忘记密码" target="_blank">mysql忘记密码</a></h2>
                <p class="tag">标 签：
				<a href="http://p.com/Article-catags-tag-19.html" title="1"><span>php</span></a><a href="http://p.com/Article-catags-tag-16.html" title="1"><span>mysql</span></a>				</p>
				<div class="clr"></div>
				<div class="date" style="border:none;box-shadow:none;z-index:-100;">
                	<!--
                	<p class="image"><a href="/index.php?m=Index&a=index"><img alt="PhPyRb博客!马伟博客!" src="./Public/Image/logo.jpg" /></a></p>
                    <p class="time"><a href="/index.php?m=Index&a=index">Ma Wei</a></p>
					-->
                </div>
                <div class="clr"></div>
                <div class="cont" id="maxart"><h2>
	mysql忘记密码<br>
</h2>
<p>
	&nbsp;&nbsp;&nbsp; 前阵子买了个服务器，然后装了nginx服务，当时没怎么注意mysql密码，结果今天登入的时候，发现在不知道密码，所以在网上找了些方法试试，有成功有失败，现在整理一个最有效的方法，些方法只限有管理员权限的用户，
</p>
<p>
	&nbsp;&nbsp;&nbsp; 1.关闭服务器，只是关闭nginx服务，因为等下修改的是mysql启动配置，跳过密码验证，如何nginx开启可能出现安全问题，所以建意关闭nginx服务，方法如下：
</p>
<pre class="brush:jscript">//方法1：这命令简单方便
~/lnmp stop
//方法2：有些人可能上面的命令提示无效，那只能用下面的命令，
/usr/local/nginx/sbin/nginx -s stop
//这个方法就是直接进入安装目录
</pre>
<p>
	&nbsp;&nbsp;&nbsp; 2.修复mysql启动配置，打开/etc/my.cnf，找到里面的 [mysql]，在下面加入如下的命令并保存：
</p>
<pre class="brush:jscript">skip-grant-tables</pre>
&nbsp;&nbsp;&nbsp;&nbsp; 3.重启mysql服务，注意是mysql服务，不是nginx服务，启动命令如下：
<pre class="brush:jscript">/etc/init.d/mysqld restart </pre>
&nbsp;&nbsp;&nbsp;&nbsp; 4.重设mysql root密码，首先打开mysql控制台，这时候是不用密码，直接输入命令，mysql回车，就打开了控制台，输入如下 的命令：
<pre class="brush:jscript">//选择数据库,大小写无所谓
USE mysql；
//修改root,sql命令
UPDATE user SET Password = password ( ‘new-password’ ) WHERE User = ‘root’ ; 
flush privileges ;
//退出
exit;
</pre>
<p>
&nbsp;&nbsp;&nbsp; 5.把mysql启动配置修改回来，就是打开 /etc/my.cnf把刚刚加入的命令删除，保存，
</p>
<p>
&nbsp;&nbsp;&nbsp; 6.重启nginx服务器，就OK了…… 
</p></div>
                <div class="info">
                	<p>
                		<span><a href="http://p.com/Article-catags-cate-4.html" target="_blank">Python</a></span> / 
						<span><a href="http://p.com/Article-comment-artid-69.html" target="_blank">评 论&nbsp;(0)</a></span> / 
						<span>热度&nbsp;(213℃)</span> / 
						<span>2014-11-17</span> / 
						<span><a href="http://p.com/Article-comment-artid-69.html" target="_blank">阅读全文&nbsp;</a></span> /
						<span>MaWei-PhPyRb</span> 
					</p>
			      </div>
                </div>
                <div>
                    <div class="clr">
                    </div>
                </div><div class="article first">
         		<h2 class="h123"><a href="http://p.com/Article-content-artid-57.html" title="php生成真静态页面,php静态html" target="_blank">php生成静态页</a></h2>
                <p class="tag">标 签：
				<a href="http://p.com/Article-catags-tag-19.html" title="1"><span>php</span></a>				</p>
				<div class="clr"></div>
				<div class="date" style="border:none;box-shadow:none;z-index:-100;">
                	<!--
                	<p class="image"><a href="/index.php?m=Index&a=index"><img alt="PhPyRb博客!马伟博客!" src="./Public/Image/logo.jpg" /></a></p>
                    <p class="time"><a href="/index.php?m=Index&a=index">Ma Wei</a></p>
					-->
                </div>
                <div class="clr"></div>
                <div class="cont" id="maxart"><h3>
	php生成静态
</h3>
<p>
	<br>
</p>
<p>
	1.静态方法有两种，一种是伪静态，一种真静态。
</p>
<p>
	&nbsp;&nbsp;&nbsp; a.伪静态，通常的做法是url的操作，把url最后访问的文件改静态页面的后缀。这种一般要改写 url 规则。
</p>
<p>
	&nbsp;&nbsp;&nbsp; b.真静态，是把所有动态的页面生成真正的 html 文件，访问的时候不需要再通过PHP处理了。
</p>
<p>
	2.php生成静态的方法，有好几种方法，但实现结果是一样的，我这里介绍常用的。
</p>
<p>
	<br>
</p>
<pre class="brush:php">ob_start();//开启静态缓存，注意的是，开启这个的时候，前面是不能有输出。
echo '这里输出你要生成的静态文件的字符';//把你要生成静态文件的字符串缓存到内存中， 注：这个用了一些常用的模板系统的，都有生成的，你直接用echo输出。
//当然，如果你没有模板的时候，可以用到下面的方法。直接访问你要生成静态的网页。然后保存成文件
$content = ob_get_contents();  //获取内存中缓存的静态字符串
ob_end_clean(); //结束获取，并清除内存中的缓存
if(file_exists('./index.html')){  //判断力之前生成没有，有就删除
	unlink('./index.html');
}
file_put_contents('./navi.html',$content); //把获取的缓存写入文件并保存成文件。
//这样怎么样静态就生成</pre>
<p>
	3.如何没有用到模板系统，就没有办法直接输出静态的字符串，那只能有更直接的方法，直接去访问你要生成的页面，方法如下：
</p>
<pre class="brush:php">$html = file_get_contents('你要缓存成静态文件的url');
file_put_contents('./index.html',$content);</pre>
<p>
	<br>
</p>
<p>
	<br>
</p>
<p>
	<br>
</p></div>
                <div class="info">
                	<p>
                		<span><a href="http://p.com/Article-catags-cate-3.html" target="_blank">PHP</a></span> / 
						<span><a href="http://p.com/Article-comment-artid-57.html" target="_blank">评 论&nbsp;(0)</a></span> / 
						<span>热度&nbsp;(309℃)</span> / 
						<span>2014-10-22</span> / 
						<span><a href="http://p.com/Article-comment-artid-57.html" target="_blank">阅读全文&nbsp;</a></span> /
						<span>MaWei-PhPyRb</span> 
					</p>
			      </div>
                </div>
                <div>
                    <div class="clr">
                    </div>
                </div><div class="article first">
         		<h2 class="h123"><a href="http://p.com/Article-content-artid-66.html" title="php短网址生成，php短网址生成的方法函数." target="_blank">php短网址</a></h2>
                <p class="tag">标 签：
				<a href="http://p.com/Article-catags-tag-19.html" title="1"><span>php</span></a>				</p>
				<div class="clr"></div>
				<div class="date" style="border:none;box-shadow:none;z-index:-100;">
                	<!--
                	<p class="image"><a href="/index.php?m=Index&a=index"><img alt="PhPyRb博客!马伟博客!" src="./Public/Image/logo.jpg" /></a></p>
                    <p class="time"><a href="/index.php?m=Index&a=index">Ma Wei</a></p>
					-->
                </div>
                <div class="clr"></div>
                <div class="cont" id="maxart"><h3>
	php短网址
</h3>
<p>
	相信php短网址各位都会有用到吧，现在有个功能需求就是要做网址生成，我找了好多个办法，
</p>
<p>
	开始的时候自己写了一个生成算法，后来没有用上，因为老大说要用百度的，去他的API是去看了，好是好，
</p>
<p>
	不过他好的网址都会报错，最后没有，在网上找了一个开源的，不费话了，直接上代码：
</p><pre class="brush:php">/**
 * 短网址替换
 * @return string $_url
 * @author MaWei (http://www.phpyrb.com)
 * @date 2014-9-3 下午5:46:50
 */
function vwzShortUrl($_url){
	$requery=curl_init();
	curl_setopt($requery,CURLOPT_URL,"http://vwz.me/API.php?url=$_url");
	curl_setopt($requery, CURLOPT_RETURNTRANSFER, true);
	$retstr=curl_exec($requery);
	curl_close($requery);
	$retstr = json_decode($retstr);
	if($retstr-&gt;status != 'error'){
		$shorturl = $retstr-&gt;msg;
	}else{
		$shorturl = $_url;
	}
	return $shorturl;
}</pre>
这个用问题，可以直接留言，或者直接去官网看API；
<p></p></div>
                <div class="info">
                	<p>
                		<span><a href="http://p.com/Article-catags-cate-3.html" target="_blank">PHP</a></span> / 
						<span><a href="http://p.com/Article-comment-artid-66.html" target="_blank">评 论&nbsp;(0)</a></span> / 
						<span>热度&nbsp;(199℃)</span> / 
						<span>2014-10-22</span> / 
						<span><a href="http://p.com/Article-comment-artid-66.html" target="_blank">阅读全文&nbsp;</a></span> /
						<span>MaWei-PhPyRb</span> 
					</p>
			      </div>
                </div>
                <div>
                    <div class="clr">
                    </div>
                </div><div class="article first">
         		<h2 class="h123"><a href="http://p.com/Article-content-artid-65.html" title="php,正则匹配网址,网址正则匹配表达示." target="_blank">网址正则匹配</a></h2>
                <p class="tag">标 签：
				<a href="http://p.com/Article-catags-tag-21.html" title="2"><span>python</span></a><a href="http://p.com/Article-catags-tag-19.html" title="1"><span>php</span></a><a href="http://p.com/Article-catags-tag-18.html" title="1"><span>jquery</span></a>				</p>
				<div class="clr"></div>
				<div class="date" style="border:none;box-shadow:none;z-index:-100;">
                	<!--
                	<p class="image"><a href="/index.php?m=Index&a=index"><img alt="PhPyRb博客!马伟博客!" src="./Public/Image/logo.jpg" /></a></p>
                    <p class="time"><a href="/index.php?m=Index&a=index">Ma Wei</a></p>
					-->
                </div>
                <div class="clr"></div>
                <div class="cont" id="maxart"><h3>
	网址正则匹配
</h3>
<p>
	最近做社交网址，要用到正则匹配网址，到网上找了好多，都不太行，看了很多论坛，
</p>
<p>
	最后在国外论坛看到一个网址正则匹配表达达，不多说了，直接上表达式：
</p><pre class="brush:php">if(preg_match_all('/((?:https?|ftp):\/\/(?:www\.)?(?:[a-zA-Z0-9][a-zA-Z0-9\-]*\.)?[a-zA-Z0-9][a-zA-Z0-9\-]*(?:\.[a-zA-Z0-9]+)+(?:\:[0-9]*)?(?:\/[^\x{2e80}-\x{9fff}\s&lt;\'\"“”‘’,，。]*)?)/u',$_html,$matches)){
    return $mathches
}</pre>
至于匹配后要做的操作，各位看官自行处理，一般情况是会用到替换，不然找出来干什么了，可以用，str_replace()方法就可以了;
<p></p></div>
                <div class="info">
                	<p>
                		<span><a href="http://p.com/Article-catags-cate-3.html" target="_blank">PHP</a></span> / 
						<span><a href="http://p.com/Article-comment-artid-65.html" target="_blank">评 论&nbsp;(0)</a></span> / 
						<span>热度&nbsp;(166℃)</span> / 
						<span>2014-10-22</span> / 
						<span><a href="http://p.com/Article-comment-artid-65.html" target="_blank">阅读全文&nbsp;</a></span> /
						<span>MaWei-PhPyRb</span> 
					</p>
			      </div>
                </div>
                <div>
                    <div class="clr">
                    </div>
                </div>	
				                <div id="page">
                    <p>
                    	<a class="textpage" href="javascript:void(0);">62 条</a>   <a class="current" href="javascript:void(0);">1</a><a href="http://p.com/Article-index-p-2.html">2</a><a href="http://p.com/Article-index-p-3.html">3</a><a href="http://p.com/Article-index-p-4.html">4</a><a href="http://p.com/Article-index-p-5.html">5</a> <a href="http://p.com/Article-index-p-7.html">7</a> <a href="http://p.com/Article-index-p-2.html">&gt;&gt;</a> <a href="javascript:void(0);">1/7页</a>                    </p>
                </div>
								<div class="clr"></div>
				
            </div>
            <!-- start right -->
            <div class="right">
                <div class="sidebar">
                    <h2>热门标签</h2>
                    <div class="clr">
                    </div>
					<ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-26.html" title="">MongoDB</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-25.html" title="">NoSQL</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-22.html" title="">django</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-21.html" title="">python</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-20.html" title="">wamp</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-19.html" title="">php</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-18.html" title="">jquery</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-17.html" title="">debian</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-16.html" title="">mysql</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-15.html" title="">git</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-14.html" title="">Vim</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-13.html" title="">Linux</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-12.html" title="">Program</a>
	                        </li>
						</ul><ul class="sb_menu two">
	                        <li>
	                            <a href="http://p.com/Article-catags-tag-11.html" title="">Skill</a>
	                        </li>
						</ul>                </div>
                <div class="sidebar">
                    <h2>热门文章</h2>
                    <div class="clr">
                    </div>
                    <ul class="sb_menu">
	<li>
		    <a href="http://p.com/Article-content-artid-39.html" title="Python列表常用函数详解, index,in,extend,append,insert">Python列表常用函数详解</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-1.html" title="debian初始安装,debian安装设置,debian安装vim,debian安装代码提示,debian安装PHP环境,debian安装lnmp">debian 初始安装</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-32.html" title="django的url配置、用法。">django url 详解 - Python Django  学习笔记4</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-12.html" title="mysql分组group mysql gorup mysql分组统计 mysql分组显示">mysql分组group </a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-6.html" title="php面试题 php陷阱题 php基础题 php常见面试题 php考题">php面试题 陷阱题</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-8.html" title="wamp5,apache 虚拟主机配置 wamp5虚拟主机配置 apache虚拟主机配置">wamp虚拟主机配置</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-2.html" title="Js获取屏幕高度，获取屏幕宽度。 ">Js获取屏幕body宽高度</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-7.html" title="MySql常用语句 有用的MySQL语句 MySql语句">MySql常用语句</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-3.html" title="php空间的在线解压 php空间的在线解压ZIP php空间解压ZIP 在线解压ZIP 在线解压zip 空间php解压 php空间解压">php空间的在线解压 ZIP</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-22.html" title="vps 安全登录的方法 ssh  登录">vps 安全登录的方法 ssh 登录</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-24.html" title="django 初始化安装，python django学习笔记">django 安装初始化-Python Django 学习笔记1</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-15.html" title="vim基本命令,vim常用命令">vim基本命令,vim常用命令</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-11.html" title="Linux安装git git linux配置安装 liunx git">Linux安装git</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-19.html" title="python安装mysql">python安装mysql</a>&nbsp;(216)
		</li><li>
		    <a href="http://p.com/Article-content-artid-4.html" title="Jquery随屏滚动特效 jquery滚动 jquery滚动特效 jquery特效">Jquery随屏滚动特效</a>&nbsp;(216)
		</li>
                    </ul>
                </div>
				<div class="sidebar">
                    <h2>文章分类</h2>
                    <div class="clr"></div>
                    <ul class="sb_menu">
                    	<li>
	                            <a href="http://p.com/Article-catags-cate-4.html" title="Python是一个很牛的语言，是应该好好学习的语言。">Python</a>&nbsp; (25)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-3.html" title="php是一门很好学，很容易懂的语言，易学，想要精通得花的功夫。">PHP</a>&nbsp; (10)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-10.html" title="Apache+Mysql是一个绝配啊！">Apache+MySQL</a>&nbsp; (6)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-9.html" title="Linux系统太牛了，又安全，又稳定，又易移植、家族又强大，一个字牛。">Linux</a>&nbsp; (12)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-1.html" title="顶级分类">Skill</a>&nbsp; (0)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-2.html" title="编程语言主分类">Program</a>&nbsp; (0)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-5.html" title="Ruby分类，Ruby的相关文章。">Ruby</a>&nbsp; (0)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-6.html" title="js+jquery分类">Jquery+Js</a>&nbsp; (11)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-7.html" title="HTML5语言的相关文章">HTML</a>&nbsp; (0)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-8.html" title="">CSS</a>&nbsp; (0)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-23.html" title="">Other</a>&nbsp; (3)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-24.html" title="">MongoDB</a>&nbsp; (2)
	                        </li><li>
	                            <a href="http://p.com/Article-catags-cate-25.html" title="">Cache</a>&nbsp; (0)
	                        </li>                    </ul>
                </div>
            </div>
            <!-- end right -->
        </div>
        <div class="clr">
        </div>
        <div class="footer">
            <p class="lr">
                © Copyright <a href="http://www.phpyrb.com/">http://www.phpyrb.com</a>.
            </p>
            <p class="lf">
                Collect from: <a href="http://www.phpyrb.com/" title="马伟博客" target="_blank">马伟博客</a>
            </p>
            <p style="display:none;"><a href="http://www.phpyrb.com/sitemap/sitemap.html">sitemap</a></p>
            <div class="clr">
            </div>
        </div>
         <script type="text/javascript" src="./js/prism.js"></script>    
</body></html>